<div class="main-container">
  <!-- Upper Half: Project and Task Management Side-by-Side -->
  <div class="upper-half">
    <div class="project-container" style="flex: 1;">
      <h2>Project Management</h2>
      <form [formGroup]="createProjectForm" (ngSubmit)="onCreateProject()" *ngIf="createProjectForm">
        <input formControlName="projectName" class="form-control" placeholder="Project Name" required>
        <input formControlName="assignedTo" class="form-control" placeholder="Assign To" required>
        <input formControlName="startDate" type="date" class="form-control" required>
        <input formControlName="endDate" type="date" class="form-control" required>
        <div>
          <textarea formControlName="description" class="form-control" placeholder="Description"></textarea>
        </div>
        <div>
          <button type="submit" class="btn btn-primary">Create Project</button>
        </div>
      </form>
    </div>

  <!-- Task Management Component for Selected Project -->
  <div class="task-container" style="flex: 1; padding-left: 20px;">
    <h3>Task Management</h3>

    <div *ngIf="selectedProject">
      <h4 class="mt-3">Task List for {{ selectedProject.projectName }}</h4>

      <div *ngIf="selectedProject.tasks?.length > 0; else noTasks">
        <ul class="list-group mb-3">
          <li *ngFor="let task of selectedProject.tasks" class="list-group-item">
            {{ task.taskName }} - {{ task.status }}
          </li>
        </ul>
      </div>

      <ng-template #noTasks>
        <p>No tasks available for this project.</p>
      </ng-template>

      <app-task-management
        [projectId]="selectedProject.projectId"
        [tasks]="selectedProject.tasks"
        (taskCreated)="onTaskCreated()"
        (taskUpdated)="onTaskUpdated()"
        (taskDeleted)="onTaskDeleted($event)">
      </app-task-management>
    </div>
  </div>
</div>
  <!-- Lower Half: Project Details -->
  <div class="lower-half">
    <h2>Project Details</h2>
    <p>Details about the selected project will be shown here...</p>
    <div class="mt-4">
      <h3>List of Projects</h3>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Project ID</th>
            <th>Project Name</th>
            <th>Assigned To</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let project of projects">
            <td>{{ project.projectId }}</td>
            <td>{{ project.projectName }}</td>
            <td>{{ project.assignedTo }}</td>
            <td>{{ project.startDate | date }}</td>
            <td>{{ project.endDate | date }}</td>
            <td>
              <select [(ngModel)]="project.status">
                <option *ngFor="let status of projectStatuses" [value]="status">{{ status }}</option>
              </select>
            </td>
            <td>{{ project.description }}</td>
            <td>
              <button (click)="viewTasks(project)" class="btn btn-info btn-sm">
                {{ project.isLoading ? 'Hide Tasks' : 'View Tasks' }}
              </button>
              <button (click)="deleteProject(project.projectId)" class="btn btn-danger btn-sm ml-2">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
